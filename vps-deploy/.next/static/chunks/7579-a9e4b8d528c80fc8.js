"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1274,7579,8893],{1274:(e,t,a)=>{a.d(t,{Ap:()=>u,UG:()=>h,Xe:()=>d,bx:()=>p,checkChambreAvailability:()=>i,getAllForfaits:()=>v,getAllRoomTypes:()=>s,getAllServices:()=>g,getCertificatsAmounts:()=>y,getCurrentUser:()=>x,getSpaCategories:()=>f,k2:()=>l,lz:()=>c,rE:()=>m,registerGuest:()=>b,wN:()=>n});var r=a(49103);let o="cmiajn0ck0000r37cliherz4z",s=e=>{let t=e||o;return r.Ay.get("/api/v1/room-types/hotels/".concat(t))},i=e=>r.Ay.post("/chambres/availability",e),l=e=>{let t={hotelId:e.hotelId||o,checkInDate:e.checkInDate,checkOutDate:e.checkOutDate};return r.Ay.get("/api/v1/reservations/availability",{params:t})},n=e=>{let t={...e,hotelId:e.hotelId||o};return r.Ay.post("/api/v1/reservations/calculate",t)},c=e=>{let t={...e,hotelId:e.hotelId||o};return r.Ay.post("/api/v1/reservations/guest",t)},d=(e,t)=>r.Ay.post("/api/v1/reservations/".concat(e,"/confirm-payment"),t),u=e=>r.Ay.get("/api/v1/reviews/hotel/".concat(e)),m=e=>r.Ay.get("/api/v1/reviews/hotel/".concat(e,"/stats")),p=e=>r.Ay.post("/api/v1/reviews",e),h=e=>r.Ay.post("/api/v1/reviews/".concat(e,"/helpful")),g=()=>r.Ay.get("/api/v1/spa/services?hotelId=".concat(o)),v=()=>r.Ay.get("/api/v1/spa/forfaits?hotelId=".concat(o)),y=()=>r.Ay.get("/api/v1/spa/certificats/amounts?hotelId=".concat(o)),f=()=>r.Ay.get("/api/v1/reservations/spa-categories"),b=e=>r.Ay.post("/api/v1/auth/guest/register",e),x=()=>r.Ay.get("/auth/me")},6439:(e,t,a)=>{a.d(t,{G:()=>s,j:()=>o});var r=a(1213);let o=()=>(0,r.wA)(),s=r.d4},18224:(e,t,a)=>{a.d(t,{Ay:()=>f,RM:()=>i,dr:()=>v,R3:()=>p,_W:()=>g,xA:()=>m});var r=a(59267),o=a(38981);let s={rooms:[],filteredRooms:[],loading:!1,error:null,filters:{category:"Toutes",minPrice:0,maxPrice:1e4,capacity:1,available:null,checkIn:"",checkOut:""}},i=(0,r.zD)("rooms/fetchRooms",async(e,t)=>{let{rejectWithValue:r}=t;try{let{getAllRoomTypes:e}=await Promise.all([a.e(5125),a.e(8893)]).then(a.bind(a,1274)),t=await o.n.get("room-types",()=>e(),18e4);console.log("✅ R\xe9ponse API room-types:",t.data);let r=t.data.data,s=r.roomTypes||r||[];if(console.log("\uD83D\uDCE6 Types de chambres (inventaire):",s),s.length>0&&(console.log("\uD83D\uDD0D Structure du premier roomType:",s[0]),console.log("\uD83D\uDD0D Cl\xe9s disponibles:",Object.keys(s[0]))),!Array.isArray(s))throw console.error("❌ roomTypes n'est pas un tableau:",s),Error("Format de donn\xe9es invalide: roomTypes doit \xeatre un tableau");let i=s.map((e,t)=>{console.log("\uD83D\uDD04 Transformation roomType ".concat(t+1,":"),e);try{let a=function(e){let t={ac:"Climatisation",tv:"T\xe9l\xe9vision",wifi:"Wi-Fi",minibar:"Minibar",balcony:"Balcon",jacuzzi:"Jacuzzi",dining:"Salle \xe0 manger",kitchen:"Cuisine",safe:"Coffre-fort",phone:"T\xe9l\xe9phone",hairdryer:"S\xe8che-cheveux",bathtub:"Baignoire",shower:"Douche",desk:"Bureau",sofa:"Canap\xe9"},a=e.amenities&&"object"==typeof e.amenities?Object.entries(e.amenities).filter(e=>{let[t,a]=e;return!0===a}).map(e=>{let[a,r]=e;return t[a]||a.charAt(0).toUpperCase()+a.slice(1)}):[],r=e.roomType||e.type||"STANDARD",o=e.category?e.category.includes("Premium")?"Premium":e.category.includes("Business")?"Business":e.category.includes("Famille")?"Famille":"Standard":({DELUXE:"Premium",SUITE:"Premium",PRESIDENTIAL:"Premium",EXECUTIVE:"Business",STANDARD:"Standard",DOUBLE:"Standard",SIMPLE:"Standard",FAMILY:"Famille",CONDO:"Famille",TWIN:"Standard"})[r.toUpperCase()]||"Standard";return{id:e.id,nom:e.name||"Chambre ".concat(r),type:r,categorie:o,description:e.description||"Chambre confortable et bien \xe9quip\xe9e",prix:e.basePrice||0,prixWeekend:e.weekendPrice||e.basePrice||0,capacite:e.capacity||1,superficie:e.size||25,images:e.images&&e.images.length>0?e.images:["/images/chambres/0.webp"],equipements:a,note:4.5,avis:0,disponible:!0}}(e);return console.log("✅ Transform\xe9 ".concat(t+1,":"),a),a}catch(a){return console.error("❌ Erreur transformation ".concat(t+1,":"),a,e),null}}).filter(e=>null!==e);return console.log("✅ Chambres transform\xe9es (total):",i.length,i),i}catch(e){var s,i;if(console.error("❌ Erreur fetchRooms:",e),"ECONNABORTED"===e.code||"ERR_NETWORK"===e.code||"Network Error"===e.message)return r("MAINTENANCE");return r((null==(i=e.response)||null==(s=i.data)?void 0:s.message)||e.message||"Erreur inconnue")}}),l=(0,r.zD)("rooms/checkAvailability",async(e,t)=>{let{roomId:r,checkIn:o,checkOut:s}=e,{rejectWithValue:i}=t;try{let{checkChambreAvailability:e}=await Promise.all([a.e(5125),a.e(8893)]).then(a.bind(a,1274)),t=await e({chambreId:r,dateDebut:o,dateFin:s});return{roomId:r,available:t.data.available}}catch(e){var l,n;return i((null==(n=e.response)||null==(l=n.data)?void 0:l.message)||e.message||"Erreur inconnue")}}),n=(0,r.Z0)({name:"rooms",initialState:s,reducers:{setRooms:(e,t)=>{e.rooms=t.payload,e.filteredRooms=t.payload},setCategory:(e,t)=>{e.filters.category=t.payload,c(e)},setPriceRange:(e,t)=>{e.filters.minPrice=t.payload.min,e.filters.maxPrice=t.payload.max,c(e)},setCapacity:(e,t)=>{e.filters.capacity=t.payload,c(e)},setAvailability:(e,t)=>{e.filters.available=t.payload,c(e)},setDates:(e,t)=>{e.filters.checkIn=t.payload.checkIn,e.filters.checkOut=t.payload.checkOut},resetFilters:e=>{e.filters=s.filters,e.filteredRooms=e.rooms},updateRoomAvailability:(e,t)=>{let a=e.rooms.find(e=>e.id===t.payload.roomId.toString());a&&(a.disponible=t.payload.available),c(e)}},extraReducers:e=>{e.addCase(i.pending,e=>{e.loading=!0,e.error=null}),e.addCase(i.fulfilled,(e,t)=>{e.loading=!1,e.rooms=t.payload,c(e)}),e.addCase(i.rejected,(e,t)=>{e.loading=!1,e.error=t.payload}),e.addCase(l.fulfilled,(e,t)=>{let a=e.rooms.find(e=>e.id===t.payload.roomId.toString());a&&(a.disponible=t.payload.available),c(e)})}});function c(e){console.log("\uD83D\uDD27 D\xe9but applyFilters - Total chambres:",e.rooms.length),console.log("\uD83D\uDD27 Filtres actifs:",e.filters);let t=e.rooms;if("Toutes"!==e.filters.category){let a=t.length;t=t.filter(t=>t.categorie===e.filters.category),console.log('\uD83D\uDCC1 Filtre cat\xe9gorie "'.concat(e.filters.category,'": ').concat(a," -> ").concat(t.length))}let a=t.length,r=t.filter(t=>t.prix>=e.filters.minPrice&&t.prix<=e.filters.maxPrice);if(r.length<t.length){let o=t.filter(t=>t.prix<e.filters.minPrice||t.prix>e.filters.maxPrice);console.log("\uD83D\uDCB0 Filtre prix (".concat(e.filters.minPrice,"$ - ").concat(e.filters.maxPrice,"$): ").concat(a," -> ").concat(r.length)),console.log("❌ Chambres exclues par prix:",o.map(e=>({nom:e.nom,prix:e.prix})))}let o=(t=r).length;if((t=t.filter(t=>t.capacite>=e.filters.capacity)).length<o&&console.log("\uD83D\uDC65 Filtre capacit\xe9 (>= ".concat(e.filters.capacity,"): ").concat(o," -> ").concat(t.length)),null!==e.filters.available){let a=t.length;(t=t.filter(t=>t.disponible===e.filters.available)).length<a&&console.log("✅ Filtre disponibilit\xe9 (".concat(e.filters.available,"): ").concat(a," -> ").concat(t.length))}console.log("✅ Fin applyFilters - Chambres filtr\xe9es:",t.length),e.filteredRooms=t}let{setRooms:d,setCategory:u,setPriceRange:m,setCapacity:p,setAvailability:h,setDates:g,resetFilters:v,updateRoomAvailability:y}=n.actions,f=n.reducer},38981:(e,t,a)=>{a.d(t,{n:()=>o});class r{async get(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e5,r=Date.now(),o=this.cache.get(e);if(o&&r-o.timestamp<o.ttl)return console.log("✅ Cache HIT: ".concat(e)),o.data;console.log("⚠️ Cache MISS: ".concat(e));try{let o=await t();return this.cache.set(e,{data:o,timestamp:r,ttl:a}),o}catch(t){if(o)return console.log("⚠️ Using stale cache for: ".concat(e)),o.data;throw t}}invalidate(e){this.cache.delete(e),console.log("\uD83D\uDDD1️ Cache invalidated: ".concat(e))}invalidatePattern(e){Array.from(this.cache.keys()).forEach(t=>{t.includes(e)&&(this.cache.delete(t),console.log("\uD83D\uDDD1️ Cache invalidated: ".concat(t)))})}clear(){this.cache.clear(),console.log("\uD83D\uDDD1️ Cache cleared")}cleanup(){let e=Date.now();Array.from(this.cache.keys()).forEach(t=>{let a=this.cache.get(t);a&&e-a.timestamp>=a.ttl&&this.cache.delete(t)})}constructor(){this.cache=new Map}}let o=new r;setInterval(()=>{o.cleanup()},6e5)},49103:(e,t,a)=>{a.d(t,{Ay:()=>n,Yb:()=>o});var r=a(95125);let o="cmiajn0ck0000r37cliherz4z",s=["/api/v1/rooms","/api/v1/room-types","/api/v1/auth/guest","/api/v1/reservations/calculate","/api/v1/reservations/availability","/api/v1/reservations/guest","/api/v1/reviews/hotel","/api/v1/chat/start","/api/v1/chat/"],i=["/api/v1/spa/services","/api/v1/spa/forfaits","/api/v1/spa/certificats","/api/v1/spa/statistics","/api/v1/reservations/spa-categories"],l=r.A.create({baseURL:"https://apihotel.novic.dev",timeout:15e3,headers:{"Content-Type":"application/json"},responseType:"json",withCredentials:!1});l.interceptors.request.use(async e=>{let t=(e=>!!e&&s.some(t=>e.includes(t)))(e.url),a=(e=>!!e&&i.some(t=>e.includes(t)))(e.url);if(console.log("\uD83D\uDD35 API Request:",{baseURL:e.baseURL,url:e.url,fullURL:"".concat(e.baseURL).concat(e.url),isPublic:t,isSemiPublic:a,requiresAuth:!t&&!a}),t)e.withCredentials=!1,delete e.headers.Authorization;else if(a){e.withCredentials=!1;try{{let t=localStorage.getItem("userToken");t?(e.headers.Authorization="Bearer ".concat(t),console.log("\uD83D\uDD11 Token envoy\xe9 pour route semi-publique")):(console.log("⚠️ Pas de token trouv\xe9, requ\xeate sans auth"),delete e.headers.Authorization)}}catch(t){console.error("Erreur lors de la r\xe9cup\xe9ration du token:",t),delete e.headers.Authorization}}else{e.withCredentials=!1;try{{let t=localStorage.getItem("userToken");t?(e.headers.Authorization="Bearer ".concat(t),console.log("\uD83D\uDD11 Token envoy\xe9 pour route priv\xe9e:",t.substring(0,30)+"...")):console.warn("⚠️ Aucun token trouv\xe9 pour route priv\xe9e")}}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration du token:",e)}}return e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,e=>{if(e.response){let{status:t,data:a}=e.response;switch(t){case 401:localStorage.removeItem("userToken");break;case 403:console.error("Acc\xe8s interdit");break;case 404:console.error("Ressource non trouv\xe9e");break;case 500:console.error("Erreur serveur");break;default:console.error("Erreur API:",(null==a?void 0:a.message)||e.message)}}else e.request?console.error("Pas de r\xe9ponse du serveur"):console.error("Erreur de configuration:",e.message);return Promise.reject(e)});let n=l},66398:(e,t,a)=>{a.d(t,{l:()=>i});var r=a(95155),o=a(34486),s=a(95740);function i(e){let{onRetry:t,title:a="Site en maintenance",message:i="Nous effectuons actuellement des am\xe9liorations pour vous offrir une meilleure exp\xe9rience.",submessage:l="Nos services seront de nouveau disponibles tr\xe8s bient\xf4t.",phone:n="+1 418 962-2581",email:c="info@hotel-sept-iles.com"}=e;return(0,r.jsx)(o.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-2xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-gradient-to-br from-primary-50 to-primary-100 rounded-3xl p-12 text-center shadow-lg border border-primary-200",children:[(0,r.jsxs)("div",{className:"relative inline-block mb-6",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-primary-600/20 blur-xl rounded-full"}),(0,r.jsx)("div",{className:"relative bg-white rounded-full p-6 shadow-md",children:(0,r.jsx)(s.A,{className:"h-16 w-16 text-primary-600"})})]}),(0,r.jsx)("h2",{className:"text-3xl font-display font-bold text-neutral-800 mb-4",children:a}),(0,r.jsx)("p",{className:"text-lg text-neutral-600 mb-2",children:i}),(0,r.jsx)("p",{className:"text-neutral-500 mb-8",children:l}),(0,r.jsxs)("div",{className:"bg-white/80 backdrop-blur rounded-2xl p-6 mb-8 border border-white/50",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-neutral-700 mb-3",children:"En attendant, vous pouvez nous contacter :"}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[(0,r.jsxs)("a",{href:"tel:".concat(n.replace(/\s/g,"")),className:"inline-flex items-center gap-2 text-primary-600 hover:text-primary-700 font-medium transition-colors",children:[(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),n]}),(0,r.jsxs)("a",{href:"mailto:".concat(c),className:"inline-flex items-center gap-2 text-primary-600 hover:text-primary-700 font-medium transition-colors",children:[(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),c]})]})]}),t&&(0,r.jsxs)("button",{onClick:t,className:"btn-primary inline-flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"R\xe9essayer"]}),(0,r.jsxs)("div",{className:"mt-8 flex justify-center gap-2",children:[(0,r.jsx)("div",{className:"h-2 w-2 bg-primary-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,r.jsx)("div",{className:"h-2 w-2 bg-primary-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,r.jsx)("div",{className:"h-2 w-2 bg-primary-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]})})}}}]);