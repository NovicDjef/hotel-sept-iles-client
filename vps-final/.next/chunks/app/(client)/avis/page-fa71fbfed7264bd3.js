(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[981,1274,8893],{919:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(45105).A)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1274:(e,t,a)=>{"use strict";a.d(t,{Ap:()=>d,UG:()=>h,Xe:()=>u,bx:()=>p,checkChambreAvailability:()=>i,getAllForfaits:()=>v,getAllRoomTypes:()=>l,getAllServices:()=>x,getCertificatsAmounts:()=>g,getCurrentUser:()=>y,getSpaCategories:()=>b,k2:()=>n,lz:()=>c,rE:()=>m,registerGuest:()=>f,wN:()=>o});var s=a(49103);let r="cmiajn0ck0000r37cliherz4z",l=e=>{let t=e||r;return s.Ay.get("/api/v1/room-types/hotels/".concat(t))},i=e=>s.Ay.post("/chambres/availability",e),n=e=>{let t={hotelId:e.hotelId||r,checkInDate:e.checkInDate,checkOutDate:e.checkOutDate};return s.Ay.get("/api/v1/reservations/availability",{params:t})},o=e=>{let t={...e,hotelId:e.hotelId||r};return s.Ay.post("/api/v1/reservations/calculate",t)},c=e=>{let t={...e,hotelId:e.hotelId||r};return s.Ay.post("/api/v1/reservations/guest",t)},u=(e,t)=>s.Ay.post("/api/v1/reservations/".concat(e,"/confirm-payment"),t),d=e=>s.Ay.get("/api/v1/reviews/hotel/".concat(e)),m=e=>s.Ay.get("/api/v1/reviews/hotel/".concat(e,"/stats")),p=e=>s.Ay.post("/api/v1/reviews",e),h=e=>s.Ay.post("/api/v1/reviews/".concat(e,"/helpful")),x=()=>s.Ay.get("/api/v1/spa/services?hotelId=".concat(r)),v=()=>s.Ay.get("/api/v1/spa/forfaits?hotelId=".concat(r)),g=()=>s.Ay.get("/api/v1/spa/certificats/amounts?hotelId=".concat(r)),b=()=>s.Ay.get("/api/v1/reservations/spa-categories"),f=e=>s.Ay.post("/api/v1/auth/guest/register",e),y=()=>s.Ay.get("/auth/me")},5937:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(45105).A)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},18085:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(45105).A)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},20508:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(45105).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},23664:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(45105).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},25276:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(45105).A)("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]])},27816:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(45105).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},39347:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(45105).A)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},49103:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>o,Yb:()=>r});var s=a(95125);let r="cmiajn0ck0000r37cliherz4z",l=["/api/v1/rooms","/api/v1/room-types","/api/v1/auth/guest","/api/v1/reservations/calculate","/api/v1/reservations/availability","/api/v1/reservations/guest","/api/v1/reviews/hotel","/api/v1/chat/start","/api/v1/chat/"],i=["/api/v1/spa/services","/api/v1/spa/forfaits","/api/v1/spa/certificats","/api/v1/spa/statistics","/api/v1/reservations/spa-categories"],n=s.A.create({baseURL:"https://apihotel.novic.dev",timeout:15e3,headers:{"Content-Type":"application/json"},responseType:"json",withCredentials:!1});n.interceptors.request.use(async e=>{let t=(e=>!!e&&l.some(t=>e.includes(t)))(e.url),a=(e=>!!e&&i.some(t=>e.includes(t)))(e.url);if(console.log("\uD83D\uDD35 API Request:",{baseURL:e.baseURL,url:e.url,fullURL:"".concat(e.baseURL).concat(e.url),isPublic:t,isSemiPublic:a,requiresAuth:!t&&!a}),t)e.withCredentials=!1,delete e.headers.Authorization;else if(a){e.withCredentials=!1;try{{let t=localStorage.getItem("userToken");t?(e.headers.Authorization="Bearer ".concat(t),console.log("\uD83D\uDD11 Token envoy\xe9 pour route semi-publique")):(console.log("⚠️ Pas de token trouv\xe9, requ\xeate sans auth"),delete e.headers.Authorization)}}catch(t){console.error("Erreur lors de la r\xe9cup\xe9ration du token:",t),delete e.headers.Authorization}}else{e.withCredentials=!1;try{{let t=localStorage.getItem("userToken");t?(e.headers.Authorization="Bearer ".concat(t),console.log("\uD83D\uDD11 Token envoy\xe9 pour route priv\xe9e:",t.substring(0,30)+"...")):console.warn("⚠️ Aucun token trouv\xe9 pour route priv\xe9e")}}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration du token:",e)}}return e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>{if(e.response){let{status:t,data:a}=e.response;switch(t){case 401:localStorage.removeItem("userToken");break;case 403:console.error("Acc\xe8s interdit");break;case 404:console.error("Ressource non trouv\xe9e");break;case 500:console.error("Erreur serveur");break;default:console.error("Erreur API:",(null==a?void 0:a.message)||e.message)}}else e.request?console.error("Pas de r\xe9ponse du serveur"):console.error("Erreur de configuration:",e.message);return Promise.reject(e)});let o=n},63581:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(45105).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},65229:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(45105).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},91078:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(45105).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},91169:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(45105).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},97003:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>q});var s=a(95155),r=a(12115),l=a(34486),i=a(919),n=a(91169),o=a(45105);let c=(0,o.A)("MessageSquarePlus",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]]);var u=a(39347),d=a(63581);let m=(0,o.A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var p=a(15239),h=a(25276),x=a(5937),v=a(1274);function g(e){let{avis:t,index:i}=e,[n,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[m,g]=(0,r.useState)(t.utile||0),[b,f]=(0,r.useState)(!1),[y,j]=(0,r.useState)(null),N=5;if("number"==typeof t.note&&!isNaN(t.note)&&t.note>=1&&t.note<=5)N=t.note;else if(t.note){let e=Number(t.note);!isNaN(e)&&e>=1&&e<=5?N=e:console.warn("⚠️ Note invalide pour l'avis:",t.id,"Note:",t.note)}let w=async()=>{if(!c&&!b)try{if(f(!0),j(null),!t.id)throw Error("ID de l'avis manquant");let{ensureGuestAuth:e}=await a.e(7052).then(a.bind(a,74671));if(!await e())throw Error("Impossible de s'authentifier. Veuillez r\xe9essayer.");await (0,v.UG)(String(t.id)),g(e=>e+1),d(!0),console.log("✅ Avis marqu\xe9 comme utile")}catch(t){var e,s;console.error("❌ Erreur lors du marquage comme utile:",t),j((null==(s=t.response)||null==(e=s.data)?void 0:e.message)||t.message||"Erreur lors du marquage")}finally{f(!1)}},A=t.commentaire&&t.commentaire.length>300;return(0,s.jsxs)(l.P.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.1*i,duration:.5},whileHover:{y:-4},className:"group relative",children:[(0,s.jsx)("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-primary-500 via-accent-gold to-primary-500 rounded-3xl opacity-0 group-hover:opacity-10 blur-xl transition-all duration-500"}),(0,s.jsxs)("div",{className:"relative bg-white rounded-3xl p-6 lg:p-8 shadow-lg group-hover:shadow-2xl transition-all duration-500 border border-neutral-100",children:[(0,s.jsxs)("div",{className:"flex items-start gap-4 mb-6",children:[(0,s.jsx)(l.P.div,{whileHover:{scale:1.1},className:"relative h-14 w-14 rounded-full overflow-hidden bg-gradient-to-br from-primary-400 to-primary-600 flex-shrink-0 ring-2 ring-white shadow-md",children:(0,s.jsx)(p.default,{src:t.avatar,alt:t.auteur,fill:!0,className:"object-cover"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-2",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-bold text-lg text-neutral-900 mb-1",children:t.auteur}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-neutral-500",children:[(0,s.jsxs)("span",{children:["S\xe9jour en ",t.sejour]}),(0,s.jsx)("span",{children:"•"}),(0,s.jsx)("span",{className:"text-primary-600 font-medium",children:t.chambre})]})]}),(0,s.jsx)("span",{className:"text-sm text-neutral-400 whitespace-nowrap",children:(()=>{try{let e=new Date(t.date);if(isNaN(e.getTime()))return t.date||"Date inconnue";return e.toLocaleDateString("fr-CA",{day:"numeric",month:"long",year:"numeric"})}catch(e){return t.date||"Date inconnue"}})()})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-0.5 bg-gradient-to-r from-yellow-50 to-amber-50 px-3 py-1.5 rounded-full",children:[[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)(u.A,{className:"h-4 w-4 transition-all ".concat(t<N?"text-yellow-500 fill-yellow-500":"text-neutral-300")},t)),(0,s.jsxs)("span",{className:"ml-1.5 text-sm font-bold text-neutral-900",children:[N,".0"]})]})})]})]}),(0,s.jsx)("h4",{className:"font-display text-xl font-bold text-neutral-900 mb-4 leading-tight",children:t.titre}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("p",{className:"text-neutral-700 leading-relaxed ".concat(!n&&A?"line-clamp-4":""),children:t.commentaire}),A&&(0,s.jsx)("button",{onClick:()=>o(!n),className:"text-primary-600 hover:text-primary-700 font-medium text-sm mt-2 flex items-center gap-1",children:n?"Voir moins":"Lire la suite"})]}),t.photos&&t.photos.length>0&&(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("div",{className:"flex gap-3 overflow-x-auto scrollbar-hide pb-2",children:t.photos.map((e,t)=>e&&(0,s.jsxs)(l.P.div,{whileHover:{scale:1.05},className:"relative w-40 h-40 rounded-2xl overflow-hidden flex-shrink-0 cursor-pointer shadow-md hover:shadow-xl transition-all",children:[(0,s.jsx)(p.default,{src:e,alt:"Photo ".concat(t+1),fill:!0,className:"object-cover"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 hover:opacity-100 transition-opacity"})]},t))})}),(0,s.jsx)("div",{className:"flex items-center gap-4 pt-6 border-t border-neutral-100",children:(0,s.jsxs)(l.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:w,disabled:c||b,className:"flex items-center gap-2 px-4 py-2 rounded-xl font-medium text-sm transition-all ".concat(c?"bg-primary-50 text-primary-600":b?"bg-neutral-50 text-neutral-400 cursor-wait":"bg-neutral-50 text-neutral-600 hover:bg-primary-50 hover:text-primary-600"),children:[(0,s.jsx)(h.A,{className:"h-4 w-4 ".concat(c?"fill-current":""," ").concat(b?"animate-pulse":"")}),(0,s.jsx)("span",{children:b?"Envoi...":"Utile (".concat(m,")")})]})}),t.reponseHotel&&(0,s.jsxs)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-6 ml-0 lg:ml-12 p-5 bg-gradient-to-br from-primary-50 to-blue-50 rounded-2xl border border-primary-100",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-primary-600 to-primary-700 shadow-md",children:(0,s.jsx)(x.A,{className:"h-5 w-5 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-bold text-primary-900 block",children:"H\xf4tel Sept-\xceles"}),(0,s.jsx)("span",{className:"text-xs text-primary-600",children:"R\xe9ponse officielle"})]})]}),(0,s.jsx)("p",{className:"text-sm text-neutral-700 leading-relaxed",children:t.reponseHotel})]})]})]})}function b(e){let{avis:t,itemsPerPage:a=6}=e,[l,i]=(0,r.useState)(null),[n,o]=(0,r.useState)("recent"),[c,u]=(0,r.useState)(a),p=l?t.filter(e=>e.note===l):t;switch(n){case"recent":p=[...p].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime());break;case"ancien":p=[...p].sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime());break;case"note-haut":p=[...p].sort((e,t)=>t.note-e.note);break;case"note-bas":p=[...p].sort((e,t)=>e.note-t.note);break;case"utile":p=[...p].sort((e,t)=>t.utile-e.utile)}let h=p.slice(0,c),x=c<p.length;return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"bg-white rounded-2xl p-4 lg:p-6 shadow-md mb-8 sticky top-20 z-30",children:(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(d.A,{className:"h-5 w-5 text-primary-600"}),(0,s.jsxs)("span",{className:"text-sm font-semibold text-neutral-900",children:[p.length," avis ",l&&"avec ".concat(l," \xe9toile").concat(l>1?"s":"")]}),l&&(0,s.jsx)("button",{onClick:()=>i(null),className:"text-sm text-primary-600 hover:text-primary-700 font-medium hover:underline",children:"R\xe9initialiser"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 w-full lg:w-auto",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-neutral-600 whitespace-nowrap",children:"Trier par:"}),(0,s.jsxs)("select",{value:n,onChange:e=>o(e.target.value),className:"input-custom text-sm py-2.5 px-4 pr-10 flex-1 lg:flex-none lg:min-w-[200px]",children:[(0,s.jsx)("option",{value:"recent",children:"Plus r\xe9cents"}),(0,s.jsx)("option",{value:"ancien",children:"Plus anciens"}),(0,s.jsx)("option",{value:"note-haut",children:"Note la plus haute"}),(0,s.jsx)("option",{value:"note-bas",children:"Note la plus basse"}),(0,s.jsx)("option",{value:"utile",children:"Plus utiles"})]})]})]})}),(0,s.jsx)("div",{className:"space-y-6",children:h.map((e,t)=>(0,s.jsx)(g,{avis:e,index:t},e.id))}),x&&(0,s.jsx)("div",{className:"text-center mt-12",children:(0,s.jsxs)("button",{onClick:()=>u(e=>e+a),className:"btn-secondary px-8 py-3",children:["Charger plus d'avis (",p.length-c," restants)",(0,s.jsx)(m,{className:"h-4 w-4"})]})}),0===p.length&&(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("div",{className:"inline-flex h-16 w-16 items-center justify-center rounded-full bg-neutral-100 mb-4",children:(0,s.jsx)(d.A,{className:"h-8 w-8 text-neutral-400"})}),(0,s.jsx)("h3",{className:"font-display text-2xl font-bold text-neutral-900 mb-2",children:"Aucun avis trouv\xe9"}),(0,s.jsx)("p",{className:"text-neutral-600 mb-6",children:"Aucun avis ne correspond \xe0 vos crit\xe8res de filtrage"}),(0,s.jsx)("button",{onClick:()=>i(null),className:"btn-primary",children:"Voir tous les avis"})]})]})}var f=a(27816),y=a(91078),j=a(20508),N=a(23664);let w=(0,o.A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var A=a(65229),k=a(18085),R=a(49103);function S(e){let{onSubmit:t}=e,[i,n]=(0,r.useState)({auteur:"",email:"",chambre:"",note:5,cleanlinessRating:5,serviceRating:5,locationRating:5,valueRating:5,titre:"",commentaire:"",stayDate:new Date().toISOString().split("T")[0]}),[o,c]=(0,r.useState)([]),[d,m]=(0,r.useState)(!1),[h,x]=(0,r.useState)("idle"),[g,b]=(0,r.useState)(""),[S,C]=(0,r.useState)(!1),D=async e=>{var s,r,l,u,d,p;e.preventDefault(),m(!0),x("idle"),b("");try{if(!i.auteur.trim())throw Error("Le nom est requis");if(!i.email.trim())throw Error("L'email est requis");if(!i.chambre)throw Error("Veuillez s\xe9lectionner une chambre");if(!i.titre.trim())throw Error("Le titre est requis");if(!i.commentaire.trim())throw Error("Le commentaire est requis");if(i.note<1||i.note>5)throw Error("La note globale doit \xeatre entre 1 et 5");if(i.cleanlinessRating<1||i.cleanlinessRating>5)throw Error("La note de propret\xe9 doit \xeatre entre 1 et 5");if(i.serviceRating<1||i.serviceRating>5)throw Error("La note de service doit \xeatre entre 1 et 5");if(i.locationRating<1||i.locationRating>5)throw Error("La note d'emplacement doit \xeatre entre 1 et 5");if(i.valueRating<1||i.valueRating>5)throw Error("La note du rapport qualit\xe9/prix doit \xeatre entre 1 et 5");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email))throw Error("L'email n'est pas valide");console.log("✅ Validation r\xe9ussie, envoi de l'avis...");let{ensureGuestAuth:e}=await a.e(7052).then(a.bind(a,74671));console.log("\uD83D\uDD10 Tentative d'authentification guest...");let r=await e();console.log("\uD83D\uDD10 Token re\xe7u:",r?"Token pr\xe9sent ("+r.substring(0,20)+"...)":"Aucun token");{let e=localStorage.getItem("userToken");console.log("\uD83D\uDD10 Token dans localStorage:",e?"Pr\xe9sent ("+e.substring(0,20)+"...)":"Absent")}if(!r)throw Error("Impossible de s'authentifier. Veuillez r\xe9essayer.");console.log("✅ Authentification guest r\xe9ussie");let l={hotelId:R.Yb,roomName:i.chambre,stayDate:new Date(i.stayDate).toISOString(),overallRating:i.note,cleanlinessRating:i.cleanlinessRating,serviceRating:i.serviceRating,locationRating:i.locationRating,valueRating:i.valueRating,title:i.titre.trim(),comment:i.commentaire.trim(),photos:o.length>0?o:void 0};console.log("\uD83D\uDCE4 Envoi de l'avis:",l);let u=await (0,v.bx)(l);if(console.log("✅ Avis cr\xe9\xe9 avec succ\xe8s:",u.data),x("success"),t&&(null==(s=u.data)?void 0:s.data)){let e={id:u.data.data.id,auteur:i.auteur,email:i.email,avatar:"/images/avatars/default.svg",note:i.note,date:new Date().toISOString(),sejour:l.stayDate,chambre:i.chambre,titre:i.titre,commentaire:i.commentaire,photos:o,utile:0,reponseHotel:null};t(e)}setTimeout(()=>{n({auteur:"",email:"",chambre:"",note:5,cleanlinessRating:5,serviceRating:5,locationRating:5,valueRating:5,titre:"",commentaire:"",stayDate:new Date().toISOString().split("T")[0]}),c([]),x("idle"),C(!1)},2e3)}catch(t){console.error("❌ Erreur lors de la cr\xe9ation de l'avis:",t),x("error");let e="Une erreur est survenue lors de l'envoi de votre avis.";t.message?e=t.message:(null==(l=t.response)||null==(r=l.data)?void 0:r.message)?e=t.response.data.message:(null==(u=t.response)?void 0:u.status)===401?e="Erreur d'authentification. Veuillez r\xe9essayer.":(null==(d=t.response)?void 0:d.status)===400?e="Donn\xe9es invalides. Veuillez v\xe9rifier vos informations.":(null==(p=t.response)?void 0:p.status)===500&&(e="Erreur du serveur. Veuillez r\xe9essayer plus tard."),b(e)}finally{m(!1)}};return(0,s.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative",children:[(0,s.jsx)("div",{className:"absolute -inset-1 bg-gradient-to-r from-primary-600 via-accent-gold to-primary-600 rounded-3xl opacity-20 blur-2xl"}),(0,s.jsxs)("div",{className:"relative bg-white rounded-3xl p-8 lg:p-10 shadow-xl border border-neutral-100",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h3",{className:"font-display text-3xl font-bold text-neutral-900 mb-2",children:"Partagez votre exp\xe9rience"}),(0,s.jsx)("p",{className:"text-neutral-600",children:"Votre avis nous aide \xe0 am\xe9liorer nos services et guide les futurs clients"})]}),"success"===h&&(0,s.jsxs)(l.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-50 border border-green-200 rounded-xl p-4 mb-6 flex items-center gap-3",children:[(0,s.jsx)(f.A,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),(0,s.jsx)("p",{className:"text-sm text-green-700",children:"✅ Merci ! Votre avis a \xe9t\xe9 envoy\xe9 avec succ\xe8s et sera publi\xe9 apr\xe8s mod\xe9ration."})]}),"error"===h&&(0,s.jsxs)(l.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6 flex items-center gap-3",children:[(0,s.jsx)(y.A,{className:"h-5 w-5 text-red-600 flex-shrink-0"}),(0,s.jsxs)("div",{className:"text-sm text-red-700",children:[(0,s.jsx)("p",{className:"font-semibold",children:"Erreur lors de l'envoi"}),(0,s.jsx)("p",{children:g})]})]}),(0,s.jsxs)("form",{onSubmit:D,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Votre nom *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(j.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),(0,s.jsx)("input",{type:"text",required:!0,value:i.auteur,onChange:e=>n({...i,auteur:e.target.value}),className:"input-custom pl-11",placeholder:"Jean Dupont"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Email *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(N.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),(0,s.jsx)("input",{type:"email",required:!0,value:i.email,onChange:e=>n({...i,email:e.target.value}),className:"input-custom pl-11",placeholder:"jean.dupont@email.com"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Chambre s\xe9journ\xe9e *"}),(0,s.jsxs)("select",{required:!0,value:i.chambre,onChange:e=>n({...i,chambre:e.target.value}),className:"input-custom",children:[(0,s.jsx)("option",{value:"",children:"S\xe9lectionnez une chambre"}),["Chambre Lit Simple","Chambre Lit Double","Suite Familiale","Chambre RESIDENTIAL"].map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Date du s\xe9jour *"}),(0,s.jsx)("input",{type:"date",required:!0,value:i.stayDate,onChange:e=>n({...i,stayDate:e.target.value}),max:new Date().toISOString().split("T")[0],className:"input-custom"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-3",children:"Note globale *"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[[1,2,3,4,5].map(e=>(0,s.jsx)(l.P.button,{type:"button",whileHover:{scale:1.2},whileTap:{scale:.9},onClick:()=>{n({...i,note:e,cleanlinessRating:e,serviceRating:e,locationRating:e,valueRating:e})},className:"focus:outline-none",children:(0,s.jsx)(u.A,{className:"h-10 w-10 transition-all ".concat(e<=i.note?"text-yellow-500 fill-yellow-500":"text-neutral-300")})},e)),(0,s.jsxs)("span",{className:"ml-3 text-2xl font-bold text-neutral-900",children:[i.note,".0"]})]}),(0,s.jsxs)("button",{type:"button",onClick:()=>C(!S),className:"text-sm text-primary-600 hover:text-primary-700 underline mt-2",children:[S?"Masquer":"Afficher"," les notes d\xe9taill\xe9es (optionnel)"]})]}),S&&(0,s.jsxs)(l.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 bg-neutral-50 p-6 rounded-xl border border-neutral-200",children:[(0,s.jsx)("h3",{className:"font-semibold text-neutral-900 mb-4",children:"Notes d\xe9taill\xe9es"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Propret\xe9"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[[1,2,3,4,5].map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>n({...i,cleanlinessRating:e}),className:"focus:outline-none",children:(0,s.jsx)(u.A,{className:"h-6 w-6 transition-all ".concat(e<=i.cleanlinessRating?"text-yellow-500 fill-yellow-500":"text-neutral-300")})},e)),(0,s.jsxs)("span",{className:"ml-2 text-sm text-neutral-600",children:[i.cleanlinessRating,"/5"]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Service"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[[1,2,3,4,5].map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>n({...i,serviceRating:e}),className:"focus:outline-none",children:(0,s.jsx)(u.A,{className:"h-6 w-6 transition-all ".concat(e<=i.serviceRating?"text-yellow-500 fill-yellow-500":"text-neutral-300")})},e)),(0,s.jsxs)("span",{className:"ml-2 text-sm text-neutral-600",children:[i.serviceRating,"/5"]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Emplacement"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[[1,2,3,4,5].map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>n({...i,locationRating:e}),className:"focus:outline-none",children:(0,s.jsx)(u.A,{className:"h-6 w-6 transition-all ".concat(e<=i.locationRating?"text-yellow-500 fill-yellow-500":"text-neutral-300")})},e)),(0,s.jsxs)("span",{className:"ml-2 text-sm text-neutral-600",children:[i.locationRating,"/5"]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Rapport qualit\xe9/prix"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[[1,2,3,4,5].map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>n({...i,valueRating:e}),className:"focus:outline-none",children:(0,s.jsx)(u.A,{className:"h-6 w-6 transition-all ".concat(e<=i.valueRating?"text-yellow-500 fill-yellow-500":"text-neutral-300")})},e)),(0,s.jsxs)("span",{className:"ml-2 text-sm text-neutral-600",children:[i.valueRating,"/5"]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Titre de votre avis *"}),(0,s.jsx)("input",{type:"text",required:!0,value:i.titre,onChange:e=>n({...i,titre:e.target.value}),className:"input-custom",placeholder:"Ex: S\xe9jour inoubliable!",maxLength:100})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Votre commentaire *"}),(0,s.jsx)("textarea",{required:!0,value:i.commentaire,onChange:e=>n({...i,commentaire:e.target.value}),className:"input-custom min-h-[150px] resize-none",placeholder:"Partagez votre exp\xe9rience avec nous...",maxLength:1e3}),(0,s.jsxs)("div",{className:"text-right text-xs text-neutral-500 mt-1",children:[i.commentaire.length,"/1000 caract\xe8res"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-neutral-700 mb-3",children:"Photos (optionnel - max 4)"}),o.length<4&&(0,s.jsxs)("label",{className:"relative block",children:[(0,s.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{let t=e.target.files;t&&c([...o,...Array.from(t).map(e=>URL.createObjectURL(e))].slice(0,4))},className:"hidden"}),(0,s.jsxs)("div",{className:"border-2 border-dashed border-neutral-300 rounded-2xl p-6 text-center cursor-pointer hover:border-primary-500 hover:bg-primary-50/50 transition-all",children:[(0,s.jsx)(w,{className:"h-8 w-8 text-neutral-400 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-sm font-medium text-neutral-600",children:"Cliquez pour ajouter des photos"}),(0,s.jsx)("p",{className:"text-xs text-neutral-500 mt-1",children:"JPG, PNG jusqu'\xe0 5MB"})]})]}),o.length>0&&(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:o.map((e,t)=>(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)("div",{className:"relative aspect-square rounded-xl overflow-hidden",children:(0,s.jsx)(p.default,{src:e,alt:"Photo ".concat(t+1),fill:!0,className:"object-cover"})}),(0,s.jsx)("button",{type:"button",onClick:()=>{c(o.filter((e,a)=>a!==t))},className:"absolute -top-2 -right-2 flex h-6 w-6 items-center justify-center rounded-full bg-red-500 text-white opacity-0 group-hover:opacity-100 transition-opacity shadow-lg",children:(0,s.jsx)(A.A,{className:"h-4 w-4"})})]},t))})]}),(0,s.jsx)("div",{className:"pt-4",children:(0,s.jsxs)(l.P.button,{type:"submit",disabled:d,whileHover:{scale:1.02},whileTap:{scale:.98},className:"relative overflow-hidden w-full btn-primary py-4 text-base font-bold shadow-xl ".concat(d?"opacity-50 cursor-not-allowed":""),children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700"}),(0,s.jsx)("span",{className:"relative flex items-center justify-center gap-2",children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"h-5 w-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Envoi en cours..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.A,{className:"h-5 w-5"}),"Publier mon avis"]})})]})}),(0,s.jsx)("p",{className:"text-xs text-neutral-500 text-center",children:"En publiant, vous acceptez que votre avis soit visible publiquement"})]})]})]})}let C=[{id:1,auteur:"Marie Tremblay",avatar:"/images/avatars/avatar-1.svg",note:5,date:"2024-12-15",sejour:"D\xe9cembre 2024",chambre:"Suite Royale",titre:"Exp\xe9rience exceptionnelle !",commentaire:"Un s\xe9jour absolument magnifique ! La chambre \xe9tait spacieuse et impeccablement propre. La vue sur le fleuve \xe9tait \xe0 couper le souffle. Le personnel \xe9tait aux petits soins et tr\xe8s professionnel. Le petit-d\xe9jeuner \xe9tait d\xe9licieux avec beaucoup de choix. Je recommande vivement cet h\xf4tel et j'y retournerai sans h\xe9siter !",photos:["/images/reviews/review-1-1.jpg","/images/reviews/review-1-2.svg"],utile:24,reponseHotel:"Merci infiniment Marie pour ce merveilleux commentaire ! Nous sommes ravis que votre s\xe9jour ait \xe9t\xe9 \xe0 la hauteur de vos attentes. Au plaisir de vous accueillir \xe0 nouveau !"},{id:2,auteur:"Jean-Fran\xe7ois Bouchard",avatar:"/images/avatars/avatar-2.svg",note:5,date:"2024-12-10",sejour:"D\xe9cembre 2024",chambre:"Chambre Deluxe",titre:"Parfait pour un weekend",commentaire:"Excellent rapport qualit\xe9-prix. La chambre \xe9tait moderne et tr\xe8s confortable. Le lit king size \xe9tait incroyablement douillet. Le service spa est un vrai plus, j'ai ador\xe9 le massage. Parking gratuit et wifi rapide. Seul petit b\xe9mol : le bruit des chambres voisines le matin, mais rien de d\xe9rangeant.",photos:[],utile:18,reponseHotel:null},{id:3,auteur:"Sophie Gagnon",avatar:"/images/avatars/avatar-3.svg",note:4,date:"2024-12-05",sejour:"Novembre 2024",chambre:"Suite Familiale",titre:"Id\xe9al pour les familles",commentaire:"Nous avons pass\xe9 un excellent s\xe9jour en famille. La suite familiale \xe9tait parfaite pour nos deux enfants avec ses deux chambres s\xe9par\xe9es. La cuisine \xe9quip\xe9e est tr\xe8s pratique. Les enfants ont ador\xe9 la piscine. Personnel tr\xe8s accueillant et souriant. Un peu de bruit le matin mais globalement une tr\xe8s belle exp\xe9rience.",photos:["/images/reviews/review-3-1.svg"],utile:12,reponseHotel:"Merci Sophie ! Nous sommes heureux que vos enfants aient appr\xe9ci\xe9 leur s\xe9jour. \xc0 bient\xf4t !"},{id:4,auteur:"Alexandre Leblanc",avatar:"/images/avatars/avatar-4.svg",note:5,date:"2024-11-28",sejour:"Novembre 2024",chambre:"Suite Royale",titre:"Le meilleur h\xf4tel de la C\xf4te-Nord",commentaire:"J'ai voyag\xe9 dans plusieurs h\xf4tels de la r\xe9gion et celui-ci se d\xe9marque vraiment. Le service est impeccable, les chambres sont luxueuses et la localisation est id\xe9ale. Le hammam est exceptionnel. Rapport qualit\xe9-prix imbattable pour ce niveau de prestations.",photos:[],utile:31,reponseHotel:null},{id:5,auteur:"Catherine Lavoie",avatar:"/images/avatars/avatar-5.svg",note:5,date:"2024-11-20",sejour:"Novembre 2024",chambre:"Chambre Deluxe",titre:"Magnifique d\xe9couverte",commentaire:"Premier s\xe9jour \xe0 Sept-\xceles et j'ai \xe9t\xe9 agr\xe9ablement surprise par la qualit\xe9 de cet h\xf4tel. Tout est pens\xe9 pour le confort des clients. Les massages sont divins, la masseuse \xe9tait tr\xe8s professionnelle. Petit-d\xe9jeuner copieux et vari\xe9. Je reviendrai c'est certain !",photos:["/images/reviews/review-5-1.jpg","/images/reviews/review-5-2.jpg","/images/reviews/review-5-3.svg"],utile:15,reponseHotel:"Catherine, quel plaisir de lire votre avis ! Merci d'avoir choisi notre \xe9tablissement. \xc0 tr\xe8s bient\xf4t !"},{id:6,auteur:"Marc-Andr\xe9 Roy",avatar:"/images/avatars/avatar-6.svg",note:5,date:"2024-11-15",sejour:"Novembre 2024",chambre:"Suite Panoramique",titre:"Vue spectaculaire",commentaire:"La suite panoramique porte bien son nom ! La vue \xe0 180\xb0 sur le fleuve est absolument magnifique, surtout au coucher de soleil. La chambre est immense et ultra moderne. Le jacuzzi priv\xe9 sur le balcon est un vrai luxe. Service 5 \xe9toiles. Un peu cher mais \xe7a vaut vraiment le coup pour une occasion sp\xe9ciale.",photos:[],utile:28,reponseHotel:null}],D=e=>{try{var t;if(!e)return console.warn("⚠️ Avis invalide:",e),null;let a=[];e.photos&&(Array.isArray(e.photos)?a=e.photos.filter(e=>e&&"string"==typeof e):"string"==typeof e.photos&&(a=e.photos.split(",").map(e=>e.trim()).filter(Boolean)));let s=new Date().toISOString().split("T")[0];try{if(e.createdAt){let t=new Date(e.createdAt);isNaN(t.getTime())||(s=t.toISOString().split("T")[0])}}catch(t){console.warn("⚠️ Date invalide pour l'avis:",e.id,t)}let r=5;if(void 0!==e.overallRating&&null!==e.overallRating)if("object"==typeof e.overallRating)console.log("ℹ️ overallRating est un objet pour l'avis:",e.id,e.overallRating),"number"==typeof e.overallRating.overallRating?r=e.overallRating.overallRating:console.warn("⚠️ Impossible d'extraire la note de l'objet overallRating");else{let t=Number(e.overallRating);!isNaN(t)&&t>=1&&t<=5?r=t:console.warn("⚠️ Note invalide pour l'avis:",e.id,"Note re\xe7ue:",e.overallRating)}let l="Anonyme";if(e.guest){let t=e.guest.firstName||"",a=e.guest.lastName||"",s="".concat(t," ").concat(a).trim();s&&(l=s)}let i=(null==(t=e.guest)?void 0:t.avatar)||"/images/avatars/default.svg",n="Date inconnue";e.stayDate&&"string"==typeof e.stayDate&&(n=e.stayDate);let o=e.roomName&&"string"==typeof e.roomName?e.roomName:"Chambre",c=e.title&&"string"==typeof e.title?e.title:"Sans titre",u=e.comment&&"string"==typeof e.comment?e.comment:"",d="number"==typeof e.helpfulCount&&e.helpfulCount>=0?e.helpfulCount:0,m=e.hotelResponse&&"string"==typeof e.hotelResponse?e.hotelResponse:null;return{id:e.id||Date.now(),auteur:l,avatar:i,note:r,date:s,sejour:n,chambre:o,titre:c,commentaire:u,photos:a,utile:d,reponseHotel:m}}catch(t){return console.error("❌ Erreur lors de la transformation de l'avis:",t,"Avis:",e),null}};function q(){let[e,t]=(0,r.useState)([]),[a,o]=(0,r.useState)(!1),[d,m]=(0,r.useState)(!0),[p,h]=(0,r.useState)(null),[x,g]=(0,r.useState)(0),[f,y]=(0,r.useState)(0),[j,N]=(0,r.useState)({5:0,4:0,3:0,2:0,1:0});(0,r.useEffect)(()=>{(async()=>{try{var e,a;m(!0),console.log("\uD83D\uDD0D Chargement des avis pour l'h\xf4tel:",R.Yb);let[s,r]=await Promise.all([(0,v.Ap)(R.Yb),(0,v.rE)(R.Yb)]);console.log("✅ R\xe9ponse compl\xe8te de l'API avis:",s),console.log("✅ Avis re\xe7us (data):",s.data),console.log("\uD83D\uDCCA R\xe9ponse compl\xe8te des stats:",r),console.log("\uD83D\uDCCA Stats re\xe7ues (data):",r.data);let l=(null==(e=s.data)?void 0:e.data)||s.data||[];console.log("\uD83D\uDCCB Type de reviewsData:",typeof l,"Is array:",Array.isArray(l)),console.log("\uD83D\uDCCB Contenu de reviewsData:",JSON.stringify(l,null,2));let i=Array.isArray(l)?l.map((e,t)=>{console.log("\uD83D\uDD04 Transformation avis ".concat(t,":"),e);let a=D(e);return console.log("✅ Avis transform\xe9 ".concat(t,":"),a),a}).filter(e=>null!==e):[];console.log("\uD83D\uDCDD Total avis transform\xe9s:",i.length),t(i);let n=(null==(a=r.data)?void 0:a.data)||r.data||{};console.log("\uD83D\uDCCA Stats extraites:",JSON.stringify(n,null,2));let o=0;if("number"!=typeof n.averageRating||isNaN(n.averageRating)){if("object"==typeof n.averageRating&&null!==n.averageRating){let e=n.averageRating.overallRating;"number"!=typeof e||isNaN(e)||(o=e)}}else o=n.averageRating;g(o);let c=n.totalReviews||n.total||n.published||0,u="number"!=typeof c||isNaN(c)?0:c;y(u);let d=n.ratingDistribution||{},p={5:"number"!=typeof d[5]||isNaN(d[5])?0:d[5],4:"number"!=typeof d[4]||isNaN(d[4])?0:d[4],3:"number"!=typeof d[3]||isNaN(d[3])?0:d[3],2:"number"!=typeof d[2]||isNaN(d[2])?0:d[2],1:"number"!=typeof d[1]||isNaN(d[1])?0:d[1]};N(p),h(null)}catch(e){console.error("❌ Erreur chargement avis:",e),h("Impossible de charger les avis"),t(C),g(4.9),y(847),N({5:85,4:10,3:3,2:1,1:1})}finally{m(!1)}})()},[]);let w=async a=>{o(!1);try{var s,r;console.log("\uD83D\uDD04 Rechargement des avis apr\xe8s soumission...");let[e,a]=await Promise.all([(0,v.Ap)(R.Yb),(0,v.rE)(R.Yb)]),l=(null==(s=e.data)?void 0:s.data)||e.data||[],i=Array.isArray(l)?l.map(D).filter(e=>null!==e):[];t(i);let n=(null==(r=a.data)?void 0:r.data)||a.data||{},o=0;if("number"!=typeof n.averageRating||isNaN(n.averageRating)){if("object"==typeof n.averageRating&&null!==n.averageRating){let e=n.averageRating.overallRating;"number"!=typeof e||isNaN(e)||(o=e)}}else o=n.averageRating;g(o);let c=n.totalReviews||n.total||n.published||0,u="number"!=typeof c||isNaN(c)?0:c;y(u);let d=n.ratingDistribution||{},m={5:"number"!=typeof d[5]||isNaN(d[5])?0:d[5],4:"number"!=typeof d[4]||isNaN(d[4])?0:d[4],3:"number"!=typeof d[3]||isNaN(d[3])?0:d[3],2:"number"!=typeof d[2]||isNaN(d[2])?0:d[2],1:"number"!=typeof d[1]||isNaN(d[1])?0:d[1]};N(m),console.log("✅ Avis recharg\xe9s avec succ\xe8s")}catch(s){console.error("❌ Erreur rechargement avis:",s),t([a,...e])}window.scrollTo({top:0,behavior:"smooth"})};return d?(0,s.jsx)("div",{className:"min-h-screen pt-16 bg-neutral-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(i.A,{className:"h-12 w-12 animate-spin text-primary-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-neutral-600",children:"Chargement des avis..."})]})}):(0,s.jsxs)("div",{className:"min-h-screen pt-16 bg-neutral-50",children:[p&&(0,s.jsx)("div",{className:"bg-yellow-50 border-b border-yellow-200 p-4",children:(0,s.jsx)("div",{className:"container-custom",children:(0,s.jsxs)("p",{className:"text-yellow-800 text-sm",children:["⚠️ ",p," - Affichage des donn\xe9es d'exemple"]})})}),(0,s.jsxs)("section",{className:"relative bg-gradient-luxury text-white py-20 overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full blur-3xl"}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-accent-gold/10 rounded-full blur-3xl"}),(0,s.jsx)("div",{className:"container-custom relative",children:(0,s.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-3xl mx-auto text-center",children:[(0,s.jsxs)(l.P.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2},className:"inline-flex items-center gap-2 bg-white/10 backdrop-blur-md border border-white/20 rounded-full px-5 py-2 mb-6",children:[(0,s.jsx)(n.A,{className:"h-5 w-5"}),(0,s.jsxs)("span",{className:"font-semibold",children:[f," clients satisfaits"]})]}),(0,s.jsx)("h1",{className:"font-display text-4xl lg:text-6xl font-bold mb-6 leading-tight",children:"Ce que disent nos clients"}),(0,s.jsx)("p",{className:"text-lg lg:text-xl text-white/90 mb-8",children:"D\xe9couvrez les exp\xe9riences authentiques de nos visiteurs"}),(0,s.jsxs)(l.P.button,{onClick:()=>o(!a),whileHover:{scale:1.05},whileTap:{scale:.95},className:"btn-gold inline-flex items-center gap-2",children:[(0,s.jsx)(c,{className:"h-5 w-5"}),a?"Fermer le formulaire":"Laisser un avis"]})]})})]}),a&&(0,s.jsx)("section",{className:"py-12 bg-gradient-to-b from-white to-neutral-50",children:(0,s.jsx)("div",{className:"container-custom",children:(0,s.jsx)("div",{className:"max-w-3xl mx-auto",children:(0,s.jsx)(S,{onSubmit:w})})})}),(0,s.jsx)("section",{className:"py-16 bg-white border-b border-neutral-200",children:(0,s.jsx)("div",{className:"container-custom",children:(0,s.jsxs)(l.P.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"grid md:grid-cols-2 lg:grid-cols-12 gap-8 items-center",children:[(0,s.jsx)("div",{className:"lg:col-span-4 text-center lg:text-left",children:(0,s.jsxs)("div",{className:"flex items-center justify-center lg:justify-start gap-6 mb-4",children:[(0,s.jsx)("div",{className:"font-display text-7xl font-bold bg-gradient-to-r from-primary-600 to-primary-800 bg-clip-text text-transparent",children:"number"==typeof x?x.toFixed(1):"0.0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex items-center gap-1 mb-2",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)(u.A,{className:"h-7 w-7 text-accent-gold fill-accent-gold drop-shadow-md"},t))}),(0,s.jsxs)("p",{className:"text-sm font-semibold text-neutral-700",children:[f," avis v\xe9rifi\xe9s"]})]})]})}),(0,s.jsx)("div",{className:"lg:col-span-8",children:(0,s.jsx)("div",{className:"space-y-3",children:[5,4,3,2,1].map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-4 p-3 rounded-xl bg-neutral-50 hover:bg-neutral-100 transition-all",children:[(0,s.jsxs)("span",{className:"text-sm font-bold text-neutral-800 w-16 flex items-center gap-1",children:[e," ",(0,s.jsx)(u.A,{className:"h-3.5 w-3.5 text-accent-gold fill-accent-gold"})]}),(0,s.jsx)("div",{className:"flex-1 h-4 bg-neutral-200 rounded-full overflow-hidden",children:(0,s.jsx)(l.P.div,{initial:{width:0},whileInView:{width:"".concat(j[e],"%")},viewport:{once:!0},transition:{duration:1,delay:.1*e},className:"h-full bg-gradient-to-r from-accent-gold to-yellow-600 rounded-full"})}),(0,s.jsxs)("span",{className:"text-sm font-semibold text-neutral-700 w-14 text-right",children:[j[e],"%"]})]},e))})})]})})}),(0,s.jsx)("section",{className:"py-16 bg-neutral-50",children:(0,s.jsx)("div",{className:"container-custom",children:(0,s.jsx)("div",{className:"max-w-5xl mx-auto",children:(0,s.jsx)(b,{avis:e,itemsPerPage:6})})})}),(0,s.jsx)("section",{className:"py-16 section-gradient",children:(0,s.jsx)("div",{className:"container-custom",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[(0,s.jsx)("h2",{className:"font-display text-3xl font-bold text-white mb-4",children:"Vivez l'exp\xe9rience par vous-m\xeame"}),(0,s.jsx)("p",{className:"text-white/90 mb-8",children:"Rejoignez nos centaines de clients satisfaits"}),(0,s.jsx)("a",{href:"/chambres",className:"btn-gold inline-flex",children:"R\xe9server maintenant"})]})})})]})}},97380:(e,t,a)=>{Promise.resolve().then(a.bind(a,97003))}},e=>{e.O(0,[4486,887,5125,8441,1255,7358],()=>e(e.s=97380)),_N_E=e.O()}]);